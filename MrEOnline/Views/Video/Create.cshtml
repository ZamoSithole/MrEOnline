@model MrE.Models.Entities.Video

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>
<script src="~/Scripts/lodash.js"></script>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Video</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group ">
            <label class="control-label  col-md-2">Genre</label>
            <div class="col-md-10">
                @*@Html.DropDownListFor(m => m.GenreID, (ViewData["GenreSelectList"] as SelectList), "Select Option", htmlAttributes: new { @class = "form-control", @required = true })*@
                @*@Html.DropDownListFor(m => m.GenreID, ((SelectList)ViewData["GenreSelectList"]), "Select Option", htmlAttributes: new { @class = "form-control", @required = true })*@
                <select id="genre-select" name="GenreID" class="form-control"><option value="0" disabled>Please Select</option></select>
                @Html.ValidationMessageFor(model => model.GenreID, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.RentalPrice, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.EditorFor(model => model.RentalPrice, new { htmlAttributes = new { @class = "form-control", @type = "number", @min = "0", @step = "0.01", @value = "0" } })
                @Html.ValidationMessageFor(model => model.RentalPrice, "", new { @class = "text-danger" })
            </div>
        </div>



        <div class="form-group">
            <input type="submit" value="Create" class="btn btn-success" />
            <a href="@Url.Action("index")" class="btn btn-default">
                Cancel
            </a>
        </div>
    </div>
}

@section Scripts
{
    <script>
        debugger;
 $.get('@Url.Action("GetGenres", "Genre")').done(function (genre) {
     $('#genre-select').empty().append("<option value=''>Select Genre</option>")
     $.each(genre, function (i, item) {
         $('#genre-select').append($('<option>', {
             value: item.Id,
             text: item.Name
         }));

     })
  });


    </script>
}